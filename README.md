#DBus сервис 

(1) СЕРВИС COM.SYSTEM.SHARING | dbusold->src
Это приложение использует модуль QDbus для размещения себя на сессионной шине сервисв dbus и предоставляет три метода:

void RegisterService(const QString& name, const QString& pathToExe, const QStringList& supportedFormats);
- сохраняет в конфигурационных файлах DBus сервиса, расположенных по пути /usr/share/dbus-1/services/ информацию о том, что существует сторонний DBus сервис, с помощью которого
можно открывать файлы заданых форматов. Помимо этого я сохраняю путь к исполняемому файлу сервиса, что позволяет автозапускать его при необходимости.

void OpenFile(path: String)
- открывает заданный файл одним из зарегистрированных DBus сервисов, если сервис не запущен проводиться попытка запуска. Если для данного файла имеется несколько зарегистрированных
DBus сервисов - выбирается случайный DBus сервис.

void OpenFileUsingService(path: String, service: String)
- открывает заданный файл заданным DBus сервисом.

ИНСТРУКЦИЯ ПО СБОРКЕ

1. Для сборки понадобиться библиотека Qt версии 6.7.2, в особенности ее модуль QDbus,
скачать ее можно на официальном сайте через qt installer.
2. После этого в dbusold->CMakeLists.txt укажите путь к установленной библиотеки через 
set(CMAKE_PREFIX_PATH "path/to/QT/6.7.2/") у меня это был /opt/Qt/6.7.2/gcc_64
3. Далее в директории dbusold/
   mkdir build
   cd build
   cmake ..
   make
   И запустите ./dbus_service &
4.Пример вызова метода 
sudo gdbus call -e -d com.system.sharing -o / -m com.system.sharing.RegisterService "com.example.texteditor" "/../dbusold/test_for_com_system_service/build/text_editor" "['txt']"

(2) ДИНАМИЧЕСКАЯ БИБЛИОТЕКА | dbusold->my_dlib
Позволяет сторонним приложениям регистрировать
DBus сервис с заданным именем на сессионной шине с единственным методом OpenFile(path: String), который выполняет обработку файла заданным способом.
Динамическая библиотка предоставляет класс, который при вызове метода start():
• Pегистрирует в основном сервисе com. system. sharing при помощи метода RegisterService сервис-обработчик с заданным именем.
• Регистрирует на DBus шине сервис с заданным именем. В качестве имени объекта используется " /". В качестве имени
интерфейса для всех экземпляров используется стандартное обозначение "it.is.imposible"

ИНСТРУКЦИЯ ПО СБОРКЕ

Все шаги аналогичны предыдущей инструкции. 

(3) ПРИМЕР DBus сервиса-обработчика с использованием библиотеки | dbusold->test_for_dlib
Задает поведение функции OpenFile, а именно передает утилите xdg-open, которая открывает приложение по умолчанию.

ИНСТРУКЦИЯ ПО СБОРКЕ 

Все шаги аналогичны предыдущей инструкции.




